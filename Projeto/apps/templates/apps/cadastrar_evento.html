{% extends 'global/base.html' %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Cadastrar novo evento</h1>
    
    <form method="post">
        {% csrf_token %}
        <div class="row">
            <!-- Coluna 1 (esquerda) -->
            <div class="col-md-4">
                <div class="form-group">
                    <label for="titulo"><strong>*Título do evento:</strong></label>
                    {{ form.titulo }}
                </div>
                <div class="form-group">
                    <label for="local"><strong>*Local do evento (Campus, prédio...):</strong></label>
                    {{ form.local }}
                </div>
                <div class="form-group">
                    <label for="descricao"><strong>*Descrição do evento:</strong></label>
                    {{ form.descricao }}
                </div>
            </div>

            <!-- Coluna 2 (central) -->
            <div class="col-md-4">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="inicio_evento"><strong>*Data:</strong></label>
                            {{ form.inicio_evento }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="fim_evento">Data de término:</label>
                            {{ form.fim_evento }}
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="horario_de_inicio"><strong>*Horário de início:</strong></label>
                            {{ form.horario_de_inicio }}
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="horario_de_termino">Horário de término:</label>
                            {{ form.horario_de_termino }}
                        </div>
                    </div>
                </div>

                <!-- Campo para o palestrante/host -->
                <div class="form-group mt-3">
                    <label for="palestrante">Que pessoa guiará o evento (palestrante, host)?</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="opcao_palestrante" id="opcaoNome" value="nome" onclick="togglePalestranteInput()">
                        <input type="text" name="palestrante" id="palestrante-input" class="form-control d-inline-block" placeholder="Digite o nome..." />
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="opcao_palestrante" id="opcaoIndefinido" value="indefinido" onclick="togglePalestranteInput()">
                        <label class="form-check-label" for="opcaoIndefinido">Indefinido / não informar</label>
                    </div>
                </div>

                <div class="form-group">
                    <label for="vagas">Vagas:</label>
                    {{ form.vagas }}
                </div>
            </div>

            <!-- Coluna 3 (direita) -->
            <div class="col-md-4">
                <div class="form-group">
                    <label for="instituicao"><strong>*Que instituição/grupo estudantil organizará o evento?</strong></label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="opcao_instituicao" id="opcaoCesarSchool" value="cesarschool" onclick="toggleInstituicaoInput()">
                        <label class="form-check-label" for="opcaoCesarSchool">CESAR School</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="opcao_instituicao" id="opcaoCesarOrg" value="cesarorg" onclick="toggleInstituicaoInput()">
                        <label class="form-check-label" for="opcaoCesarOrg">CESAR ORG</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="opcao_instituicao" id="opcaoInstituicaoNome" value="nome" onclick="toggleInstituicaoInput()">
                        <input type="text" name="instituicao" id="instituicao-input" class="form-control d-inline-block" placeholder="Digite o nome da instituição..."/>
                    </div>
                </div>

                <div class="form-group">
                    <label for="tipo">Tipo de Evento:</label>
                    {{ form.tipo }}
                </div>
                <div class="form-group">
                    <label for="status_inscricoes">Status das Inscrições:</label>
                    {{ form.status_inscricoes }}
                </div> 
                <div class="form-group">
                    <label for="participantes">Participantes convidados:</label>
                    <div id="participantes-convidados">
                        <input type="text" name="participantes[]" class="form-control mt-2" placeholder="Nome do participante">
                    </div>
                    <button type="button" class="btn btn-secondary mt-2" id="add-participante">+</button>
                </div>
                <div class="form-group">
                    <label for="tags">Tags do evento:</label>
                    <div id="tags-container">
                        <input type="text" name="tags[]" class="form-control mt-2" placeholder="Digite uma tag">
                    </div>
                    <button type="button" class="btn btn-secondary mt-2" id="add-tag">+</button>
                </div>
            </div>
        </div>

        <div class="text-center">
            <button type="submit" class="btn btn-primary mt-3">Publicar evento</button>
        </div>
    </form>
</div>

<script>
    //JavaScript para adicionar participantes
    document.addEventListener("DOMContentLoaded", function() {
        const maxParticipantes = 5;
        const maxTags = 8;
        let participantesCount = 1;
        let tagsCount = 1;

        const addParticipanteBtn = document.getElementById("add-participante");
        const addTagBtn = document.getElementById("add-tag");

        addParticipanteBtn.addEventListener("click", () => {
            if (participantesCount < maxParticipantes) {
                const input = document.createElement("input");
                input.type = "text";
                input.name = "participantes[]";
                input.className = "form-control mt-2";
                input.placeholder = "Nome do participante";
                document.getElementById("participantes-convidados").appendChild(input);
                participantesCount++;

                if (participantesCount === maxParticipantes) {
                    addParticipanteBtn.style.display = 'none';
                }
            }
        });

        addTagBtn.addEventListener("click", () => {
            if (tagsCount < maxTags) {
                const input = document.createElement("input");
                input.type = "text";
                input.name = "tags[]";
                input.className = "form-control mt-2";
                input.placeholder = "Digite uma tag";
                document.getElementById("tags-container").appendChild(input);
                tagsCount++;

                if (tagsCount === maxTags) {
                    addTagBtn.style.display = 'none';
                }
            }
        });
    });
   
    function togglePalestranteInput() {
        const opcaoNome = document.getElementById('opcaoNome');
        const inputPalestrante = document.getElementById('palestrante-input');

        // Mostra o campo de entrada se "Informar nome" for selecionado, caso contrário esconde
        if (opcaoNome.checked) {
            inputPalestrante.style.display = 'inline-block'; // Mantém visível
        } else {
            inputPalestrante.style.display = 'none'; // Esconde
            inputPalestrante.value = ''; // Limpa o campo ao escolher "Indefinido"
        }
    }
    // JavaScript para Controlar a Exibição do campo de entrada de instituição

    function toggleInstituicaoInput() {
        const opcaoInstituicaoNome = document.getElementById('opcaoInstituicaoNome');
        const inputInstituicao = document.getElementById('instituicao-input');

        // Mostra o campo de entrada se "Outro" for selecionado, caso contrário esconde
        if (opcaoInstituicaoNome.checked) {
            inputInstituicao.style.display = 'inline-block'; // Mantém visível
        } else {
            inputInstituicao.style.display = 'none'; // Esconde
            inputInstituicao.value = ''; // Limpa o campo ao escolher outra opção
        }
    }
</script>
{% endblock %}
